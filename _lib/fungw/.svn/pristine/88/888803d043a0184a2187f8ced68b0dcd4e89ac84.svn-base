print [~/* Generated by ./configure - DO NOT EDIT */

/* This file initializes all static linked language bindings */

/* Prototypes */
~]

# temporary: python3 is incompatible with python; prefer python3 for now, for testing
put /local/test/langs /local/fungw/bindings
switch /local/test/langs
	case {python[^3]}
		sub /local/test/langs {python[^3]} {}
		end
end

# ... and python3 internal calls are python
switch /local/test/langs
	case {python3}
		sub /local/test/langs {python3} {python}
		end
end

foreach /local/fungw/n in /local/test/langs
	print [~extern int pplg_init_fungw_~/local/fungw/n~(void);~] {\n}
end

print [~
/* Initialize all; returns 0 on success */
static int static_lang_init(void) {
	unsigned err = 0;
~]


foreach /local/fungw/n in /local/test/langs
	print {\t} [~err |= pplg_init_fungw_~/local/fungw/n~();~] {\n}
end

print [~	return err;
}
~]
